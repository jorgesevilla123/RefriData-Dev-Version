<div style="margin: 20px;">
    <button mat-stroked-button appBackbutton><mat-icon>arrow_back</mat-icon>  Volver</button>
</div>







<div class="card-div" *ngIf="warehouse">
    <h2 style="font-weight: 300; margin-left: 20px">
        <mat-card class="warehouse-card">
            <mat-card-title>{{warehouse.warehouse_name}}</mat-card-title>s
        </mat-card>
    </h2>
</div>





<button id="add-button" mat-stroked-button [routerLink]="['/almacenes/agregar-producto', warehouseId, warehouseName]" [queryParams]="{ page: 1 }">
    AÃ±adir productos a almacen <mat-icon id="add-icon">add</mat-icon>
  </button>






<div class="warehouse-options-div">


    <form (submit)="searchProducts(searchBox.value)">
        <mat-form-field appearance="outline" class="warehouse-search-form">
            <mat-label>Buscar productos</mat-label>
            <input #searchBox matInput id="search-box" placeholder="Buscar" />
            <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
        <button style="background-color: dodgerblue" type="submit" mat-fab>
      <mat-icon>search</mat-icon>
    </button>
    </form>


</div>






<mat-grid-list cols="3" gutterSize="10px" rowHeight="420px">
    <mat-grid-tile *ngFor="let product of pageOfItems">
        <mat-card id="{{product._id}}" class="inventory-products-card">
            <mat-card-header>
                <mat-card-title class="card-title">
                    {{product.products.title}}
                </mat-card-title>
                <button [matMenuTriggerFor]="menu" style="float: right;" mat-icon-button>
            <mat-icon>more_vert</mat-icon>
          </button>
                <mat-menu #menu="matMenu">
                    <button mat-menu-item (click)="onEdit(product)">Editar <mat-icon class="inventory-edit-button">create
              </mat-icon></button>
                    <button mat-menu-item (click)="onDeleteProduct(product)">Eliminar <mat-icon class="inventory-delete-button">delete
              </mat-icon></button>
                    <button mat-menu-item (click)="onEditPhoto(product)">Editar foto<mat-icon class="inventory-edit-img-button">
                add_photo_alternate</mat-icon></button>
                </mat-menu>
            </mat-card-header>
            <div *ngIf="product.products.cantidad < 5; else onStock">
                <mat-card-subtitle style="color: red">
                    Bajo stock
                </mat-card-subtitle>
            </div>
            <ng-template #onStock>
                <mat-card-subtitle style="color: #49ce49">
                    En stock
                </mat-card-subtitle>

            </ng-template>
            <div *ngIf="product.products.imagePath == 'no-photo'; else image">
                <img class="product-card-img" mat-card-image src="../../../../assets/no-image.png">
            </div>
            <ng-template #image>
                <!-- <img class="product-card-img" mat-card-image [src]="product.imagePath"> -->
            </ng-template>
            <mat-card-content>
                <h3>Modelo: {{product.products.modelo}}</h3>
                <h3>Precio: {{product.products.precio | currency}}</h3>
                <h3>Cantidad: {{product.products.cantidad}}</h3>

                <h2><b>Categoria: {{product.products.categorias}}</b></h2>


            </mat-card-content>

        </mat-card>

    </mat-grid-tile>

</mat-grid-list>



<div class="card-footer pb-0 pt-3 mb-4 d-block mx-auto">
    <ul *ngIf="pager.pages && pager.pages.length" class="pagination">
        <li [ngClass]="{disabled:pager.currentPage === 1}" class="page-item first-item">
            <a [routerLink]="['/almacenes/administrar-almacen/busqueda', warehouseId, warehouseName]" [queryParams]="{ page: 1 }" class="page-link">Primera</a>
        </li>
        <li [ngClass]="{disabled:pager.currentPage === 1}" class="page-item previous-item">
            <a [routerLink]="['/almacenes/administrar-almacen/busqueda', warehouseId, warehouseName]" [queryParams]=" {page: pager.currentPage - 1 }" class="page-link">
                <mat-icon>navigate_before</mat-icon>
            </a>
        </li>
        <li *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}" class="page-item number-item">
            <a [routerLink]="['/almacenes/administrar-almacen', warehouseId, warehouseName]" [queryParams]="{ page: page }" class="page-link">{{page}}</a>
        </li>
        <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}" class="page-item next-item">
            <a [routerLink]="['/almacenes/administrar-almacen/busqueda', warehouseId, warehouseName]" [queryParams]="{page: pager.currentPage + 1 }" class="page-link">
                <mat-icon>navigate_next</mat-icon>
            </a>
        </li>
        <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}" class="page-item last-item">
            <a [routerLink]="['/almacenes/administrar-almacen/busqueda', warehouseId, warehouseName]" [queryParams]="{ page: pager.totalPages }" class="page-link">Ultima</a>
        </li>
    </ul>
</div>